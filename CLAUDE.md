# CLAUDE.md

这个文件为在此代码库中工作的 Claude Code (claude.ai/code) 提供指导。

## 项目概述

这是一个点云数据可视化和分析项目，专注于对路面坑洞（凹坑）进行检测和测量。项目需要开发一个软件界面来显示点云数据，并能够分析和计算凹坑的深度、尺寸、体积和面积信息。

## 项目要求

根据 `task.md` 的描述，需要开发一个软件，软件界面上需要显示：
- 输入的点云数据
- 凹坑的深度
- 凹坑的尺寸 
- 凹坑的体积和面积
- 时间信息

## 数据文件格式

### 点云数据文件 (.asc)
- `H103v2.asc` 包含了 740 个数据点（除去前两行注释）
- 每行包含 6 个数值：X Y Z 坐标和对应的法向量分量
- 文件格式为 ASCII 文本，来自 Geomagic Studio
- 数据结构：`X Y Z Normal_X Normal_Y Normal_Z`

### 二进制数据文件 (.wrp)
- `H103v2.wrp` 是二进制数据文件，可能包含处理后的点云数据或包装数据

## 技术架构建议

### 开发语言选择
基于项目需求建议使用以下技术栈之一：
1. **C++ + PCL (Point Cloud Library)** - 专业点云处理
2. **Python + Open3D/PCL** - 快速原型开发
3. **C++ + Qt** - 桌面应用界面开发

### 核心功能模块
1. **点云数据加载和解析**
   - ASCII 点云文件读取
   - 二进制数据文件处理
   
2. **点云可视化**
   - 3D 点云渲染
   - 交互式查看（旋转、缩放、平移）
   
3. **凹坑检测算法**
   - 表面重建
   - 凹陷区域识别
   - 深度计算
   
4. **几何测量**
   - 体积计算
   - 面积计算
   - 尺寸测量（长度、宽度）
   
5. **用户界面**
   - 点云显示窗口
   - 测量结果展示
   - 时间信息显示

### 项目结构建议
```
PCL_Visualization/
├── src/
│   ├── main.cpp               # 主程序入口
│   ├── pointcloud/
│   │   ├── loader.cpp         # 点云数据加载
│   │   └── processor.cpp      # 点云处理算法
│   ├── analysis/
│   │   ├── pothole_detector.cpp  # 凹坑检测
│   │   └── measurement.cpp       # 几何测量
│   ├── ui/
│   │   ├── mainwindow.cpp     # 主窗口
│   │   └── viewer.cpp         # 3D 查看器
│   └── utils/
│       └── file_utils.cpp     # 文件处理工具
├── include/                   # 头文件
├── data/                      # 示例数据文件
│   ├── H103v2.asc
│   └── H103v2.wrp
├── build/                     # 构建目录（被忽略）
├── CMakeLists.txt            # CMake 构建配置
└── README.md                 # 项目说明文档
```

## CMake 配置要求

CMakeLists.txt 必须包含：
```cmake
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
```

这确保了 IDE 和开发工具能够正确解析项目结构。

## 开发环境设置

- 使用 fish 作为默认终端
- Python 虚拟环境使用 conda 管理
- 构建目录 `build/` 已在 `.gitignore` 中被忽略
- VS Code 配置目录 `.vscode/` 已被忽略

## 数据特征

当前数据集特点：
- 点云数据范围大致为 X: -34.7 到 -34.4, Y: 5.8 到 6.1, Z: 约 12.4
- 包含表面法向量信息，有助于表面重建和特征检测
- 数据密度较高，适合进行精确的几何分析

## 开发优先级

1. **首先**：实现点云数据加载和基本可视化
2. **其次**：开发用户界面框架
3. **然后**：实现凹坑检测算法
4. **最后**：添加测量功能和结果显示
- 不需要帮我编译